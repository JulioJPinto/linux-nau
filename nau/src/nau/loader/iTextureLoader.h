#ifndef TEXTURELOADER_H
#define TEXTURELOADER_H

#include <string>

#include "nau/material/iTexture.h"
#include "nau/material/iTexImage.h"

using namespace nau::material;

#ifdef _WINDLL
#ifdef nau_EXPORTS
#define nau_API __declspec(dllexport)   
#else  
#define nau_API __declspec(dllimport)   
#endif 
#else
#define nau_API
#endif


namespace nau
{
	namespace loader
	{
		class ITextureLoader
		{
		public:

			ITextureLoader();

			typedef enum {
				HDR,
				PNG
			} FileType;
			static ITextureLoader* create (const std::string &file);

			nau_API virtual int loadImage (bool convertToRGBA = true) = 0;
			nau_API virtual unsigned char* getData (void) = 0;
			nau_API virtual int getWidth (void) = 0;
			nau_API virtual int getHeight (void) = 0;
			nau_API virtual int getDepth(void) = 0;
			nau_API virtual std::string getFormat (void) = 0;
			nau_API virtual std::string getType (void) = 0;
			nau_API virtual void freeImage (void) = 0;

			nau_API virtual void convertToFloatLuminance() = 0;
			nau_API virtual void convertToRGBA() = 0;

			nau_API virtual void save(ITexImage *ti, std::string filename) = 0;
			nau_API virtual void save(int width, int height, unsigned char *data, std::string filename) = 0;

			static nau_API void SaveRaw(ITexture *t, std::string filename);

			static nau_API const int BITMAP_SIZE = 96;

			static nau_API void Save(ITexture *t, FileType ft);
			static nau_API void Save(int width, int height, unsigned char *data, std::string filename = "");

			nau_API virtual ~ITextureLoader(void) {};

		protected:
			std::string m_Filename;
			ITextureLoader(const std::string &file);
		};
	};
};

#endif //TEXTURELOADER_H
